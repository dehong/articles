## 多线程介绍
### 基本概念
现在的操作系统是多任务操作系统。多线程是实现多任务的一种方式。

**进程**是指一个内存中运行的应用程序，每个进程都有自己独立的一块内存空间，一个进程中可以启动多个线程。比如在Windows系统中，一个运行的exe就是一个进程。

**线程**是指进程中的一个执行流程，一个进程中可以运行多个线程。比如java.exe进程中可以运行很多线程。线程总是属于某个进程，进程中的多个线程共享进程的内存。

“同时”执行是人的感觉，在线程之间实际上轮换执行。

多线程可以是提高某些类型程序性能的好方法。然而，多线程比多任务更具挑战性。因为线程在相同的程序中执行，因此读取和写入都在同一个存储器。这可能导致出现在单线程程序中看不到错误。在单CPU机器上可能看不到这些错误，因为两个线程从未真正执行“同时”。现代电脑虽然配有多核CPU，甚至还有多个CPU。这意味着单独的线程可以由单独的内核或CPU同时执行。

如果一个线程在另一个线程写入时读取内存位置，那么第一个线程将会读取什么值？旧值？第二个线程写的值？还是两者之间的混合？或者，如果两个线程同时写入同一个内存位置，完成后会留下什么值？第一个线程写的值？第二个线程写的值？还是混合两个值？  没有适当的预防措施，任何这些结果都是可能的,甚至不可预测。结果可能会不时变化。因此，开发人员知道如何采取正确的预防措施是非常重要的 - 意味着学习控制线程如何访问内存，文件，数据库等共享资源。

### Java中的多线程
在Java中，“线程”指两件不同的事情： 
1、java.lang.Thread类的一个实例；
2、线程的执行。

使用java.lang.Thread类或者java.lang.Runnable接口编写代码来定义、实例化和启动新线程。

一个Thread类实例只是一个对象，像Java中的任何其他对象一样，具有变量和方法，生死于堆上。

Java中，每个线程都有一个调用栈，即使不在程序中创建任何新的线程，线程也在后台运行着。

一个Java应用总是从main()方法开始运行，mian()方法运行在一个线程内，它被称为主线程。

一旦创建一个新的线程，就产生一个新的调用栈。

线程总体分两类：用户线程和守候线程。

当所有用户线程执行完毕的时候，JVM自动关闭。但是守候线程却不独立于JVM，守候线程一般是由操作系统或者用户自己创建的。

### 线程的几个主要概念
在多线程编程时，你需要了解以下几个概念：
* 线程同步
* 线程间通信
* 线程死锁
* 线程控制：挂起、停止和恢复
* 线程状态

### 多线程的使用
有效利用多线程的关键是理解程序是并发执行而不是串行执行的。例如：程序中有两个子系统需要并发执行，这时候就需要利用多线程编程。
通过对多线程的使用，可以编写出非常高效的程序。不过请注意，如果你创建太多的线程，程序执行的效率实际上是降低了，而不是提升了。
请记住，上下文的切换开销也很重要，如果你创建了太多的线程，CPU 花费在上下文的切换的时间将多于执行程序的时间！

